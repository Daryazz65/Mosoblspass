<Page x:Class="Mosoblspass.View.Admin.Pages.CrudUserPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Управление пользователями">
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Grid Margin="30">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <!-- Таблица пользователей -->
            <DataGrid x:Name="UserGrid" Grid.Row="0" AutoGenerateColumns="False" IsReadOnly="True" SelectionMode="Single" SelectionChanged="UserGrid_SelectionChanged"
                      Margin="0,0,0,20" Height="250">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="ФИО" Binding="{Binding Name}" Width="*"/>
                    <DataGridTextColumn Header="Логин" Binding="{Binding Login}" Width="*"/>
                    <DataGridTextColumn Header="Роль" Binding="{Binding Role.Name}" Width="*"/>
                    <DataGridTextColumn Header="Почта" Binding="{Binding Email}" Width="*"/>
                    <DataGridTextColumn Header="Телефон" Binding="{Binding Phone}" Width="*"/>
                    <DataGridTextColumn Header="Адрес" Binding="{Binding Address}" Width="*"/>
                    <DataGridTemplateColumn Header="Действия" Width="100">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Button Content="Удалить" Click="DeleteBtn_Click" Tag="{Binding}" Background="#E74C3C" Foreground="White"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>
            <!-- Форма добавления/редактирования -->
            <Border Grid.Row="1" BorderBrush="#015198" BorderThickness="2" CornerRadius="10" Padding="20" Margin="0,0,0,20">
                <StackPanel Orientation="Vertical" Width="600">
                    <TextBlock Text="Добавление / Редактирование пользователя" FontWeight="Bold" FontSize="18" Margin="0,0,0,10"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel Orientation="Vertical" >
                            <TextBlock Text="ФИО:" HorizontalAlignment="Left"/>
                            <TextBlock Text="Логин:" HorizontalAlignment="Left"/>
                            <TextBlock Text="Пароль:" HorizontalAlignment="Left"/>
                            <TextBlock Text="Роль:" HorizontalAlignment="Left"/>
                            <TextBlock Text="Почта:" HorizontalAlignment="Left"/>
                            <TextBlock Text="Телефон:" HorizontalAlignment="Left"/>
                            <TextBlock Text="Адрес:" HorizontalAlignment="Left"/>
                        </StackPanel>
                        <StackPanel Orientation="Vertical" Grid.Column="1">
                            <TextBox x:Name="NameBox" />
                            <TextBox x:Name="LoginBox" />
                            <PasswordBox x:Name="PasswordBox" />
                            <ComboBox x:Name="RoleBox" SelectionChanged="RoleBox_SelectionChanged" DisplayMemberPath="Name" Grid.Row="3" Grid.Column="1" Height="27"/>
                            <TextBox x:Name="EmailBox" />
                            <TextBox x:Name="PhoneBox" />
                            <TextBox x:Name="AddressBox" />
                        </StackPanel>
                    </Grid>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                        <Button Click="AddBtn_Click" >
                            <TextBlock Text="Добавить" Foreground="White"/>
                        </Button>
                        <Button Click="EditBtn_Click" >
                            <TextBlock Text="Редактировать" Foreground="White"/>
                        </Button>
                        <Button Click="ClearBtn_Click" >
                            <TextBlock Text="Очистить" Foreground="White"/>
                        </Button>
                        <Button Click="DeleteBtn_Click" >
                            <TextBlock Text="Удалить" Foreground="White"/>
                        </Button>
                    </StackPanel>
                </StackPanel>
            </Border>
        </Grid>
    </ScrollViewer>
</Page>
